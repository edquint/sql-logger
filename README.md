üìÑ Leia esta documenta√ß√£o em [Portugu√™s üáßüá∑](README.pt.md)

[![Maintainer](https://img.shields.io/badge/maintainer-@edquint-blue.svg?style=flat-square)](https://github.com/edquint)
[![PHP from Packagist](https://img.shields.io/packagist/php-v/edquint/sql-logger.svg?style=flat-square)](https://packagist.org/packages/edquint/sql-logger)
[![Latest Version](https://img.shields.io/github/release/edquint/sql-logger.svg?style=flat-square)](https://github.com/edquint/sql-logger/releases/)
[![Software License](https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square)](https://github.com/edquint/sql-logger/blob/main/LICENSE)
[![Total Downloads](https://img.shields.io/packagist/dt/edquint/sql-logger.svg?style=flat-square)](https://packagist.org/packages/edquint/sql-logger)

# PHP SQL Logger

A simple library to generate SQL query logs and write them to log files.  
Useful for inspecting how queries are being built, whether using **ORMs** like **Doctrine 1**, **Doctrine 2**, and **Eloquent**, or **raw** SQL queries.

## üì¶ Installation

Add the library to your project via Composer:

```bash
composer require edquint/sql-logger
```

## üöÄ Features

* Automatically captures queries generated by popular ORMs.
* Supports **raw** queries.
* Saves logs to files in a configurable way.
* Easy integration into PHP projects.

#### Supported ORMs

* Doctrine 1
* Doctrine 2
* Eloquent

## ‚öôÔ∏è Configuration

Configuration is done through the **`LoggerConfig`** class, where you define:

* Directory for the log files.
* Name of the log file.
* Additional options.

Example:

```php
use SqlLogger\Settings\LoggerConfig;

LoggerConfig::setLogPath(__DIR__ . '/logs'); // Path where logs will be saved
LoggerConfig::setFileName('queries.log');    // Log file name
```

## ‚úÖ How to Use

The main class for generating logs is **`LogSql`**.

### 1. Logging ORM queries

If you're using a supported ORM, simply pass the query instance to the `orm` method:

```php
use SqlLogger\LogSql;

// Example with an ORM query (Doctrine, Eloquent, etc.)
LogSql::orm($query);

// Alternatively, using the global helper function
sql_logger($query);
```

This will convert the query to a formatted string and save it to the configured file.

---

### 2. Logging RAW (manual) queries

For manual SQL queries, just pass the query and parameters to the `raw` method:

```php
use SqlLogger\LogSql;

$params = ['id' => 10];
$sql = "SELECT * FROM users WHERE id = :id";

LogSql::raw($sql, $params);

// Alternatively, using the global helper function
sql_logger($sql, $params);
```

## üîç Log Output

The log will be saved in the configured directory in the following format:

```
[2025-08-02 19:00:00] Sql Query:
SELECT
  *
FROM
  users
WHERE
  id = 10
```

---

### üìÑ License

This project is licensed under the **MIT** license.
You can view the full license text in the [`LICENSE`](./LICENSE) file.
